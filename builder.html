<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Professional CV Builder</title>

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    /* ===== CSS Styles ===== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Inter, system-ui, Arial, sans-serif;
      background: #f6f8fa;
      color: #222;
      padding: 18px;
    }

    nav {
      background: #fff;
      padding: 14px;
      border-radius: 10px;
      box-shadow: 0 6px 20px rgba(30, 30, 60, 0.06);
      margin-bottom: 18px;
      display: flex;
      justify-content: center;
    }

    .logo {
      color: #4e54c8;
      font-weight: 700;
      font-size: 1.15rem;
    }

    .wrap {
      display: flex;
      gap: 22px;
      flex-wrap: wrap;
      align-items: flex-start;
      justify-content: center;
    }

    .form,
    .preview {
      width: 700px;
      min-width: 300px;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 6px 24px rgba(30, 30, 60, 0.06);
    }

    h2 {
      color: #2d2f6b;
      margin-bottom: 12px;
      text-align: center;
    }

    label {
      display: block;
      font-weight: 600;
      margin: 10px 0 6px;
    }

    input[type="text"],
    input[type="email"],
    input[type="file"] {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #d9d9ef;
      background: #fff;
    }

    .section-actions {
      display: flex;
      gap: 10px;
      margin-top: 8px;
      margin-bottom: 6px;
    }

    .btn {
      background: #4e54c8;
      color: #fff;
      padding: 9px 12px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: 700;
      transition: 0.3s;
    }

    .btn:hover {
      transform: scale(1.05);
    }

    .btn.small {
      padding: 7px 10px;
      font-size: 0.92rem;
    }

    .btn.ghost {
      background: #fff;
      color: #4e54c8;
      border: 1px solid #e6e6fa;
    }

    .field-box {
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 10px;
      background: #fbfbff;
      border: 1px solid #eef0ff;
      flex-wrap: wrap;
    }

    .field-box input {
      flex: 1;
      min-width: 120px;
    }

    .remove-btn {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      border: none;
      background: #ff6b6b;
      color: #fff;
      font-weight: 800;
      cursor: pointer;
      font-size: 18px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 18px rgba(200, 70, 70, 0.14);
      transition: 0.3s;
    }

    .remove-btn:hover {
      transform: scale(1.04);
    }

    .action-row {
      display: flex;
      gap: 10px;
      margin-top: 14px;
    }

    .action-download {
      background: #ff7f50;
      border: none;
      color: #fff;
      padding: 10px 100px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      transition: 0.3s;
    }

    .action-download:hover {
      transform: scale(1.05);
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <nav>
    <div class="logo">Professional CV Builder</div>
  </nav>

  <!-- Main Content -->
  <div class="wrap">
    <!-- Form Section -->
    <div class="form" id="form">

      <!-- Profile Image -->
      <label>Profile Image</label>
      <div class="field-box email-box">
      <input type="file" id="profileImage" accept="image/*">
      </div>

      <!-- Profile Summary -->
      <label>Profile Summary</label>
      <div class="field-box email-box">
      <textarea id="profileSummary" placeholder="Write a brief professional summary..." style="width:100%; height:80px;"></textarea>
      </div>


      <!-- Personal Information -->
      <label>Full Name</label>
      <div class="field-box email-box">
      <input id="name" type="text" placeholder="John Doe">
      </div>

      <label>Professional Title</label>
      <div class="field-box email-box">
        <input id="title" type="text" placeholder="Web Developer">
      </div>

      <!-- Languages -->
<label>Languages</label>
<div id="languages-container">
  <div class="field-box language-box">
    <input type="text" class="language" placeholder="Language">
  </div>
</div>
<div class="section-actions">
  <button class="btn small" onclick="addLanguage()">Add Language</button>
</div>



      <label>Home Address</label>
      <div class="field-box email-box">
        <input id="title" type="text" placeholder="Home Address">
      </div>

      <!-- Phones -->
      <label>Phone No</label>
      <div id="phones-container">
        <div class="field-box phone-box">
          <input type="text" class="phone" placeholder="Phone Number">
        </div>
      </div>
      <div class="section-actions">
        <button class="btn small" onclick="addPhone()">Add Phone</button>
      </div>

      <!-- Emails -->
      <label>Email</label>
      <div id="emails-container">
        <div class="field-box email-box">
          <input type="email" class="email" placeholder="Email">
        </div>
      </div>
      <div class="section-actions">
        <button class="btn small" onclick="addEmail()">Add Email</button>
      </div>

      <!-- Skills -->
      <label>Skills</label>
      <div id="skills-container">
        <div class="field-box skill-box">
          <input type="text" class="skill" placeholder="Skill">
        </div>
      </div>
      <div class="section-actions">
        <button class="btn small" onclick="addSkill()">Add Skill</button>
      </div>

      <!-- Education -->
      <label>Education</label>
      <div id="education-container">
        <div class="field-box education-box">
          <input type="text" class="education-university" placeholder="University">
          <input type="text" class="education-degree" placeholder="Degree">
          <input type="text" class="education-year" placeholder="Year">
        </div>
      </div>
      <div class="section-actions">
        <button class="btn small" onclick="addEducation()">Add Education</button>
      </div>

      <!-- Experience -->
      <label>Experience</label>
      <div id="experience-container">
        <div class="field-box experience-box">
          <input type="text" class="experience-company" placeholder="Company">
          <input type="text" class="experience-role" placeholder="Role">
          <input type="text" class="experience-duration" placeholder="Duration">
        </div>
      </div>
      <div class="section-actions">
        <button class="btn small" onclick="addExperience()">Add Experience</button>
      </div>

      <!-- Referees -->
      <label>Referee</label>
      <div id="referees-container">
        <div class="field-box referee-box">
          <input type="text" class="referee-name" placeholder="Full Name">
          <input type="text" class="referee-position" placeholder="Position (Optional)">
          <input type="text" class="referee-phone" placeholder="Phone Number">
          <input type="text" class="referee-address" placeholder="Home Address (Optional)">
        </div>
      </div>
      <div class="section-actions">
        <button class="btn small" onclick="addReferee()">Add Referee</button>
      </div>

      <!-- Action Buttons -->
      <div class="action-row">
        <button class="action-download" onclick="goToTemplate()">Download CV</button>
      </div>
    </div>
  </div>


  <script>
    // ===== Constants =====
    const MAX_PHONES = 3;
    const MAX_EMAILS = 3;
    const MAX_SKILLS = 10;
    const MAX_EDUCATION = 5;
    const MAX_EXPERIENCE = 5;
    const MAX_REFEREES = 3;
    const MAX_LANGUAGES = 10;

    let activeTemplate = 1;

    // ===== Toast System =====
    function showToast(msg) {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = msg;
      container.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    // ===== Add/Remove Buttons =====
    function createRemoveButton() {
      const button = document.createElement('button');
      button.className = 'remove-btn';
      button.type = 'button';
      button.textContent = 'Ã—';
      button.title = 'Remove';
      button.onclick = function () {
        this.parentNode.remove();
      };
      return button;
    }

    function addPhone() {
      const container = document.getElementById('phones-container');
      if (container.querySelectorAll('.phone-box').length >= MAX_PHONES) {
        return showToast(`Maximum ${MAX_PHONES} Phone Numbers Allowed`);
      }
      const box = document.createElement('div');
      box.className = 'field-box phone-box';
      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'phone';
      input.placeholder = 'Phone Number';
      box.appendChild(input);
      box.appendChild(createRemoveButton());
      container.appendChild(box);
    }

    function addLanguage() {
  const container = document.getElementById('languages-container');
  if (container.querySelectorAll('.language-box').length >= MAX_LANGUAGES) {
    return showToast(`Maximum ${MAX_LANGUAGES} Languages Allowed`);
  }
  const box = document.createElement('div');
  box.className = 'field-box language-box';

  const input = document.createElement('input');
  input.type = 'text';
  input.className = 'language';
  input.placeholder = 'Language';

  box.appendChild(input);
  box.appendChild(createRemoveButton());
  container.appendChild(box);
}


    function addEmail() {
      const container = document.getElementById('emails-container');
      if (container.querySelectorAll('.email-box').length >= MAX_EMAILS) {
        return showToast(`Maximum ${MAX_EMAILS} Emails Allowed`);
      }
      const box = document.createElement('div');
      box.className = 'field-box email-box';
      const input = document.createElement('input');
      input.type = 'email';
      input.className = 'email';
      input.placeholder = 'Email';
      box.appendChild(input);
      box.appendChild(createRemoveButton());
      container.appendChild(box);
    }

    function addSkill() {
      const container = document.getElementById('skills-container');
      if (container.querySelectorAll('.skill-box').length >= MAX_SKILLS) {
        return showToast(`Maximum ${MAX_SKILLS} Skills Allowed`);
      }
      const box = document.createElement('div');
      box.className = 'field-box skill-box';
      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'skill';
      input.placeholder = 'Skill';
      box.appendChild(input);
      box.appendChild(createRemoveButton());
      container.appendChild(box);
    }

    function addEducation() {
      const container = document.getElementById('education-container');
      if (container.querySelectorAll('.education-box').length >= MAX_EDUCATION) return;
      const box = document.createElement('div');
      box.className = 'field-box education-box';
      ['University', 'Degree', 'Year'].forEach(placeholder => {
        const input = document.createElement('input');
        input.type = 'text';
        input.className = `education-${placeholder.toLowerCase()}`;
        input.placeholder = placeholder;
        box.appendChild(input);
      });
      box.appendChild(createRemoveButton());
      container.appendChild(box);
    }

    function addExperience() {
      const container = document.getElementById('experience-container');
      if (container.querySelectorAll('.experience-box').length >= MAX_EXPERIENCE) return;
      const box = document.createElement('div');
      box.className = 'field-box experience-box';
      ['Company', 'Role', 'Duration'].forEach(placeholder => {
        const input = document.createElement('input');
        input.type = 'text';
        input.className = `experience-${placeholder.toLowerCase()}`;
        input.placeholder = placeholder;
        box.appendChild(input);
      });
      box.appendChild(createRemoveButton());
      container.appendChild(box);
    }

    function addReferee() {
      const container = document.getElementById('referees-container');
      if (container.querySelectorAll('.referee-box').length >= MAX_REFEREES) return;
      const box = document.createElement('div');
      box.className = 'field-box referee-box';
      ['Name', 'Position', 'Phone', 'Address'].forEach(placeholder => {
        const input = document.createElement('input');
        input.type = 'text';
        input.className = `referee-${placeholder.toLowerCase()}`;
        input.placeholder = placeholder;
        box.appendChild(input);
      });
      box.appendChild(createRemoveButton());
      container.appendChild(box);
    }

    // ===== Convert Image to Base64 =====
    function fileToBase64(file) {
      return new Promise((resolve, reject) => {
        if (!file) return resolve('');
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
      });
    }

    // ===== Redirect to Template Page =====
    async function goToTemplate() {
      const profileFile = document.getElementById('profileImage').files[0];
      const profileImageBase64 = await fileToBase64(profileFile);

      const cvData = {
        name: document.getElementById('name').value,
        title: document.getElementById('title').value,
        profileImage: profileImageBase64,
        phones: Array.from(document.querySelectorAll('.phone')).map(input => input.value),
        emails: Array.from(document.querySelectorAll('.email')).map(input => input.value),
        skills: Array.from(document.querySelectorAll('.skill')).map(input => input.value),
        education: Array.from(document.querySelectorAll('.education-box')).map(box => ({
          university: box.querySelector('.education-university').value,
          degree: box.querySelector('.education-degree').value,
          year: box.querySelector('.education-year').value
        })),
        experience: Array.from(document.querySelectorAll('.experience-box')).map(box => ({
          company: box.querySelector('.experience-company').value,
          role: box.querySelector('.experience-role').value,
          duration: box.querySelector('.experience-duration').value
        })),
        referees: Array.from(document.querySelectorAll('.referee-box')).map(box => ({
          name: box.querySelector('.referee-name').value,
          position: box.querySelector('.referee-position').value,
          phone: box.querySelector('.referee-phone').value,
          address: box.querySelector('.referee-address').value
        }))
      };

      localStorage.setItem('cvData', JSON.stringify(cvData));
      window.location.href = 'templates/template1.html';
    }

    // ===== Initialize Preview =====
    document.addEventListener('DOMContentLoaded', function () {
      // Optional: you can call updatePreview() here if you have live preview
    });
  </script>
</body>

</html>